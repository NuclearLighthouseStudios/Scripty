<!DOCTYPE html>
<html lang="en">

<head>
	<title>Scripty{{#if scriptId}} - {{scriptId}}{{/if}}</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="stylesheet" href="/static/style.css">
	<script>
		var updateTimeout;
		function update()
		{
			clearTimeout( updateTimeout );
			updateTimeout = setTimeout( () => { document.forms.form.submit() }, 2500 );
		}

		async function refresh()
		{
			const res = await fetch( window.location );
			if( res.ok )
				document.getElementById( "scriptView" ).innerHTML = await res.json();
		}

		document.addEventListener( "DOMContentLoaded", () =>
		{
			if( document.getElementById( "scriptView" ) )
				setInterval( refresh, 2500 );

			if( document.getElementById( "scriptEditor" ) )
				document.getElementById( "scriptEditor" ).addEventListener( "input", update );
		} );
	</script>
</head>

<body>
	{{{body}}}
</body>

</html>